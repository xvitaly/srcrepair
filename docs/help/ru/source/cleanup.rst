.. _cleanup:

*******************************
Устранение проблем и очистка
*******************************

Инструменты, представленные на этой странице позволяют решать большинство известных проблем, с которыми сталкиваются пользователи Steam и Source-игр, а также очищать выбранную игру от различного мусора, который накапливается при её использовании.

.. index:: устранение проблем, восстановление, модуль восстановления
.. _cleanup-troubleshooting:

Устранение проблем и восстановление
==========================================

Чтобы запустить восстановление Steam, нужно установить галочки в чекбоксы **Очистить .blob-файлы из каталога Steam** и/или **Очистить записи Steam, хранящиеся в реестре** (недоступно на платформах, отличных от Microsoft Windows) и нажать кнопку **Выполнить!**.

Внимание! После нажатия кнопки **Выполнить**, все процессы Steam будут автоматически завершены (если он был запущен).

Известные проблемы, исправляемые данным модулем:

 * ошибки входа в Steam;
 * ошибки типа **Серверы Steam перегружены**, **Эта игра недоступна в настоящее время**, **Ошибка подключения к серверам Steam**;
 * ошибки бесконечного подключения к серверам (Steam делает вид, что подключается, но ничего не происходит);
 * ошибки, связанные со списком друзей (например, после выхода из игры статус остаётся **В игре** и не меняется длительное время и т.д.);
 * повреждённые файлы Steam, например, после неправильного выхода из него за счёт их принудительного обновления с официальных серверов;
 * множество других ошибок.

.. index:: принцип работы модуля восстановления, алгоритм восстановления
.. _cleanup-principle:

Принцип работы инструмента восстановления
============================================

 * При выборе пункта **Очистить .blob-файлы из каталога Steam**, программа получает из реестра путь установки Steam и удаляет оттуда файлы с расширением blob, а также прописывает следующий запуск Steam в режиме обновления. Внимание! При выборе этой опции при следующем запуске в режиме обновления Steam потребует повторно авторизоваться в сервисе, т.к. файлы blob, содержащие служебную информацию, были удалены.
 * При выборе пункта **Очистить записи Steam, хранящиеся в реестре**, программа удаляет содержимое ключа реестра ``HKEY_CURRENT_USER\Software\Valve\Steam``, модифицирует содержимое ``HKEY_LOCAL_MACHINE\Software\Valve\Steam``, исправляя известные ошибки в них, а также указывает Steam при следующем запуске запуститься в режиме восстановления. При выборе этой опции, нужно обязательно указать язык, который будет использовать внутри интерфейса Steam.

.. index:: проверка пути, модуль проверки пути
.. _cleanup-pathcheck:

Служба обнаружения некорректного пути
============================================

Проверяет путь Steam на наличие в нём запрещённых символов: русских, немецких, французских и т.д. букв, а также прочих символов юникода. Путь должен содержать только латинские буквы и цифры. Если запрещённые символы будут найдены, то будет выдано сообщение об этом, а также изменится информация на странице **Устранение проблем** в группе **Информация о текущей установке Steam**. Данная служба запускается автоматически при каждом запуске SRC Repair.

.. index:: очистка игр
.. _cleanup-wizard:

Служба очистки игр и удаления ненужных данных
===============================================

Позволяет пользователю быстро и безболезненно удалить ненужные и/или устаревшие данные и кэши, которые способны занимать на жёстком диске несколько сотен мегабайт свободного места.

После выбора варианта очистки программа произведёт поиск ненужных данных и выдаст :ref:`отдельное окно модуля очистки<modules-cleanup>`, в котором вы сможете просмотреть список файлов, помеченных для удаления.

Если около имени файла стоит флажок, значит он будет удалён при запуске очистки. Чтобы оставить файл, просто уберите флажок около него. Для запуска очистки нажмите кнопку **Выполнить очистку**, для выхода без очистки -- **Отмена**.

В настоящее время SRC Repair способен выполнять следующие варианты очистки:

 * **кастомные карты** -- удаляет нестандартные карты, скачанные с серверов. Это позволит ускорить запуск игры (Source-игра при своём запуске их считывает чтобы добавить в список доступных карт) и освободить много места на жёстком диске (от нескольких сотен мегабайт до нескольких гигабайт);
 * **кэш загрузок** -- содержит данные, когда-либо скачанные с игровых серверов, спреи всех игроков, когда-либо игравших вместе с вами на игровом сервере, а также недокачанные и повреждённые во время скачивания файлы. Способен занимать сотни мегабайт. Содержит абсолютно ненужные данные. Рекомендуется очищать несколько раз в месяц;
 * **кастомный каталог** -- удаляет все установленные нестандартные модификации игры, расположенные в ``/custom``;
 * **кастомные звуки** -- очищает загруженные с серверов и установленные пользователем нестандартные звуковые файлы;
 * **игровые конфиги** -- позволяет удалить конфиги, расположенные в ``/cfg`` для того, чтобы при следующем запуске игры были восстановлены стандартные. Используйте лишь при крайней необходимости, либо при появлении серьёзных проблем, связанных с конфигами;
 * **звуковой кэш** -- удаляет звуковой кэш, созданный игрой. Используйте в случаях его повреждения, либо для оптимизации. Кэш будет создан заново при следующем запуске игры;
 * **вторичный кэш** -- содержит данные, скачанные с игровых серверов. Рекомендуется очищать несколько раз в месяц;
 * **скриншоты** -- удаляет скриншоты из подкаталога ``/screenshots``. Удаление скриншотов способно освободить от нескольких сотен мегабайт до десятка гигабайт места на диске;
 * **записанные демки** -- удаляет все записанные или установленные демки (файлы \*.dem), находящиеся в каталоге игры. Это способно освободить от нескольких десятков до нескольких сотен мегабайт места на диске;
 * **модели и текстуры** -- позволяет удалить нестандартные текстуры и модели, установленные пользователем, либо скачанные с игровых серверов;
 * **глубокая очистка** -- запускает удаление всего возможного мусора, а также старых бинарников, кэшей и конфигов. По окончании **необходимо** запустить проверку целостности кэша;
 * **реплеи (повторы)** -- удаляет кэши, созданные системой Replay.

.. index:: глубокая очистка игр, модуль глубокой очистки
.. _cleanup-advanced:

Служба специальной очистки
============================================

 * **Очистить все настройки игры** -- позволяет полностью удалить графические и прочие настройки управляемой игры. Перед удалением будет создана резервная копия.
 * **Очистить старые бинарники и лаунчеры** -- полностью удаляет двоичные файлы, которые используются для запуска программы (содержимое каталогов ``/bin``, ``/{game}/bin`` и файл ``/hl2.exe``). Используйте данный вариант очистки если игра у Вас не запускается, либо вылетает сразу после запуска с ошибкой. Данный вариант полностью безопасен. После окончания очистки запустите проверку целостности кэша.
 * **Проверить целостность игрового кэша** -- запускает проверку файлов игры на наличие повреждений, а также докачивает отсутствующие. Рекомендуется запускать после выполнения глубокой очистки, а также удаления старых бинарников и лаунчеров.
